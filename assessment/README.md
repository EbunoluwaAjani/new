### Data Pipeline Architecture

┌─────────────────────────────────────────────────────────────────────────────┐
│                          DATA SOURCES                                       │
│ ┌──────────────┐    ┌──────────────┐                                        │
│ │ PostgreSQL   │    │    Kafka     │                                        │
│ │    OLTP      │    │    Streams   │                                        │
│ └──────┬───────┘    └──────┬───────┘                                        │
└────────┼────────────────────┼──────────────────────────────────────────────┘
         │                    │
         ▼                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          INGESTION LAYER                                    │
│ ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                    │
│ │ dlt Postgres │    │ dlt Kafka    │    │   Airflow    │                    │
│ │ Pipelines    │    │ Pipleines    │    │     DAGs     │                    │
│ └──────┬───────┘    └──────┬───────┘    └──────────────┘                    │
└────────┼───────────────────┼───────────────────────────────────────────────┘
         │                    │
         ▼                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                   LAKEHOUSE - Staging LAYER                                 │
│                     ┌──────────────┐                                        │
│                     │  Raw Tables  │                                        │
│                     └──────┬───────┘                                        │
└────────────────────────────┼───────────────────────────────────────────────┘
                             ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                   LAKEHOUSE - Marts LAYER                                   │
│        ┌──────────────┐             ┌──────────────┐                        │
│        │   Cleaned    │             │  Conformed   │                        │
│        │    Tables    │             │  Dimensions  │                        │
│        └──────┬───────┘             └──────┬───────┘                        │
│               │                            │                                │
│               ▼                            ▼                                │
│ ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                    │
│ │   Revenue    │    │   Customer   │    │   Product    │                    │
│ │    Marts     │    │    Marts     │    │    Marts     │                    │
│ └──────┬───────┘    └──────┬───────┘    └──────┬───────┘                    │
└────────┼───────────────────┼───────────────────┼───────────────────────────┘
         │                    │                   │
         └────────────────────┼───────────────────┘
                              ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          AI LAYER                                           │
│             ┌──────────────┐    ┌──────────────┐                            │
│             │ MCP Server   ├───▶│ Ollama LLM   │                            │
│             └──────┬───────┘    └──────────────┘                            │
└────────────────────┼───────────────────────────────────────────────────────┘
                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                       PRESENTATION LAYER                                    │
│        ┌──────────────┐             ┌──────────────┐                        │
│        │  Streamlit   │             │   Grafana    │                        │
│        │  Dashboard   │             │  Dashboards  │                        │
│        └──────────────┘             └──────▲───────┘                        │
└────────────────────────────────────────────┼───────────────────────────────┘
                                             │
┌────────────────────────────────────────────┼─────────────────────────────┐
│                      MONITORING LAYER      │                             │
│ ┌──────────────┐    ┌──────────────┐    ┌───┴───────────┐                 │
│ │ Prometheus   ├───▶│   Jaeger     ├───▶│     Loki      │                 │
│ └──────────────┘    └──────────────┘    └───────────────┘                 │
└────────────────────────────────────────────────────────────────────────────┘