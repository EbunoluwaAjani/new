### Architecture Diagram

┌─────────────────────────────────────────────────────────────────────────────┐ │ DATA SOURCE │ │ ┌────────────────────┐ │ │ │ PostgreSQL DB │ │ │ │ public.* │ │ │ │ (raw source data) │ │ │ └──────────┬─────────┘ │ └────────────────────────────────────┼───────────────────────────────────────┘ │ ▼ ┌─────────────────────────────────────────────────────────────────────────────┐ │ STAGING LAYER │ │ Schema: default │ │ Purpose: Light cleaning, renaming, and standardization │ │ │ │ ┌────────────────────┐ ┌────────────────────┐ ┌────────────────────┐ │ │ │ stg_customer.sql │ │ stg_orders.sql │ │ stg_orderitem.sql │ │ │ ├────────────────────┤ ├────────────────────┤ ├────────────────────┤ │ │ │ stg_events.sql │ │ stg_product.sql │ │ ... │ │ │ └────────────────────┘ └────────────────────┘ └────────────────────┘ │ └────────────────────────────────────┬────────────────────────────────────────┘ │ ▼ ┌─────────────────────────────────────────────────────────────────────────────┐ │ INTERMEDIATE LAYER │ │ Business logic, dimensional models, facts, sessions, and fulfillment │ │ │ │ ┌────────────────────┐ ┌────────────────────┐ ┌────────────────────┐ │ │ │ DIMENSIONS │ │ FACTS │ │ SESSIONS │ │ │ │────────────────────│ │────────────────────│ │────────────────────│ │ │ │ dim_customer │ │ fct_orders │ │ int_session │ │ │ │ dim_product │ │ fct_orderitem │ │ int_session_bounds │ │ │ │ │ │ fct_events │ │ int_last_session_ │ │ │ │ │ │ │ │ per_customer │ │ │ │ │ │ │ │ int_cart_value │ │ │ │ │ │ │ │ int_check_order │ │ │ └────────────────────┘ └────────────────────┘ └────────────────────┘ │ │ │ │ ┌────────────────────────────┐ │ │ │ FULFILLMENT │ │ │ │────────────────────────────│ │ │ │ int_order_fulfillment │ │ │ └────────────────────────────┘ │ └────────────────────────────────────┬────────────────────────────────────────┘ │ ▼ ┌─────────────────────────────────────────────────────────────────────────────┐ │ MARTS LAYER │ │ Business-ready, analytics-focused models │ │ │ │ ┌────────────────────┐ ┌────────────────────┐ ┌──────────────────┐ │ │ │ mart_sales │ │ mart_cart_value │ │ order_fulfillment│ │ │ └────────────────────┘ └────────────────────┘ └──────────────────┘ │ └────────────────────────────────────┬────────────────────────────────────────┘ │ ▼ ┌─────────────────────────────────────────────────────────────────────────────┐ │ PROJECT METADATA & DOCUMENTATION │ │ │ │ ┌────────────────────┐ ┌────────────────────┐ ┌────────────────────┐ │ │ │ schema.yml │ │ sources.yml │ │ overview.md │ │ │ │ (tests + contracts)│ │ (source configs) │ │ docs.md │ │ │ └────────────────────┘ └────────────────────┘ └────────────────────┘ │ └─────────────────────────────────────────────────────────────────────────────┘

